# C++ Primer
## 1
* è¯»å–`cin`ä¼šåˆ·æ–°`cout`
* é»˜è®¤`cerr`å’Œ`clog`å®šå‘è‡³æ ‡å‡†é”™è¯¯ï¼›`cerr`ä¸ç¼“å†²ï¼Œ`clog`ç¼“å†²
* `endl`æ¢è¡Œå¹¶åˆ·æ–°ç¼“å†²åŒºï¼Œä¿è¯ç¨‹åºå´©æºƒæ—¶ä¸ä¸¢å¤±è¾“å‡º
* æ ‡å‡†åº“å®šä¹‰çš„åç§°å…¨éƒ¨ä½äº`std`å‘½åç©ºé—´
* `if(cin >> value)`æ£€æµ‹æµçŠ¶æ€ï¼Œå½“é‡åˆ°EOFæˆ–éæ³•è¾“å…¥æ—¶æ¡ä»¶ä¸ºå‡
* æ— åˆå€¼å®ä¾‹åˆå§‹åŒ–ç”±ç±»å†³å®šï¼Œæ— åˆå€¼å±€éƒ¨è‡ªåŠ¨å†…ç½®ç±»å‹å˜é‡åˆå€¼æœªå®šä¹‰
## 2
### å†…ç½®ç±»å‹
* `wchar_t`è‡³å°‘2å­—èŠ‚ï¼Œä¿è¯èƒ½è¦†ç›–æœºå™¨çš„æœ€å¤§å­—ç¬¦é›†ï¼ˆUnicode 4å­—èŠ‚ï¼‰ï¼Œliteralå‰ç¼€`L`
* `char16_t`ã€`char32_t`å­˜å‚¨Unicodeå­—èŠ‚ï¼Œliteralå‰ç¼€ä¸º`u`ã€`U`
* `long double`ä¸€èˆ¬ç”¨äºä¸“ç”¨æµ®ç‚¹ç¡¬ä»¶
* å¯¹`bool`èµ‹éé›¶å€¼ç»“æœä¸º`true`
* å¯¹æ— ç¬¦å·ç±»å‹è¶…èŒƒå›´èµ‹å€¼å¯¼è‡´å–æ¨¡ï¼Œå¯¹æœ‰ç¬¦å·ç±»å‹è¶…èŒƒå›´èµ‹å€¼ç»“æœæœªå®šä¹‰
* decimal literalç±»å‹ä¸º`int`ã€`long`ã€`long long`ä¸­æœ€å°èƒ½å®¹çº³å…¶å€¼çš„ï¼Œoctalã€hex literalç±»å‹ä¸º`int`ã€`unsigned`ã€`long`ã€`unsigned long`ã€`long long`ã€`unsigned long long`ä¸­æœ€å°èƒ½å®¹çº³å…¶å€¼çš„
* string literalçš„ç±»å‹ä¸º`const char []`

ğŸ˜€ï¼ˆU+1F600ï¼‰çš„å‰ç¼€|å¯èƒ½çš„å­—ç¬¦sizeof|å¯èƒ½çš„å­—ç¬¦ä¸²sizeof
-|-|-
æ— |æº¢å‡º|5
u8|éæ³•|5
L|4|8
u|æº¢å‡º|6
U|4|8
### åˆ—è¡¨åˆå§‹åŒ–
```cpp
int a = 0;
int a(0);
int a = {0};
int a{0};
```
* åä¸¤ç§æ–¹å¼ï¼Œè‹¥åˆå€¼è½¬æ¢ä¸ºç±»å‹å¯èƒ½ä¸¢å¤±ç²¾åº¦ï¼Œç¼–è¯‘å™¨å°†æŠ¥é”™
### å…¨å±€å˜é‡
* å…¨å±€`int a;`ä¸ºå®šä¹‰ï¼Œå£°æ˜å¿…é¡»åŠ `extern`
* ä¸ºé¿å…ä¸æ ‡å‡†åº“çš„åç§°å†²çªï¼Œæ ‡è¯†ç¬¦ä¸åº”åŒ…å«ä¸¤ä¸ªè¿ç»­çš„`_`ï¼Œä¸åº”ä»¥`_`+å¤§å†™å­—æ¯å¼€å¤´ï¼Œå…¨å±€å˜é‡ä¸åº”ä»¥`_`å¼€å¤´
* `::å˜é‡`å–åŒåå…¨å±€å˜é‡
* å…¨å±€`const`é»˜è®¤æ–‡ä»¶ä½œç”¨åŸŸï¼Œ`extern const`å®šä¹‰å…¨å±€ä½œç”¨åŸŸ
* å¯ä»¥è°ƒç”¨å‡½æ•°åˆå§‹åŒ–å…¨å±€å˜é‡ï¼Œä½†è‹¥å‡½æ•°æœ‰çŠ¶æ€ï¼Œä¸åŒç¼–è¯‘å•å…ƒå†…çš„å…¨å±€å˜é‡å€¼ä¸ç¡®å®šï¼ˆåˆå§‹åŒ–é¡ºåºä¸ç¡®å®šï¼‰
### å¼•ç”¨å’ŒæŒ‡é’ˆ
* `int &ref = var;`å¼•ç”¨ä¸å¯æ›´æ”¹ç»‘å®šï¼Œå¿…é¡»è¢«åˆå§‹åŒ–
* å¼•ç”¨ä¸æ˜¯å¯¹è±¡ï¼Œåªæ˜¯å¦ä¸€ä¸ªå˜é‡çš„åˆ«åï¼Œæ‰€ä»¥ä¸èƒ½å®šä¹‰å¼•ç”¨çš„å¼•ç”¨ã€å¼•ç”¨çš„æŒ‡é’ˆ
* æŒ‡é’ˆå€¼å¯ä¸ºå˜é‡åœ°å€ã€å˜é‡åçš„ä½ç½®ã€`nullptr`ã€æ— æ•ˆå€¼ï¼Œåä¸‰è€…æ—¶è§£å¼•ç”¨ç»“æœæœªå®šä¹‰
### const
* é`const &`åªèƒ½ç»‘å®šåŒ¹é…ç±»å‹çš„å˜é‡
* `const &`å¯ä»¥ç»‘å®šåˆ°ä»»ä½•èƒ½è½¬æ¢æˆå¯¹åº”ç±»å‹çš„è¡¨è¾¾å¼ï¼Œæ­¤æ—¶ç»‘å®šçš„æ˜¯ä¸€ä¸ªä¸´æ—¶å¯¹è±¡
* `const &`å¯ä»¥ç»‘å®šåˆ°å¯¹åº”ç±»å‹çš„æ™®é€šå˜é‡ï¼Œæ­¤æ—¶å¯¹å˜é‡çš„ä¿®æ”¹å¯ä»¥ååº”åˆ°å¼•ç”¨ä¸Š
* é¡¶å±‚`const`ï¼šä¸å¯ä¿®æ”¹å†…å­˜å€¼ï¼›åº•å±‚`const`ï¼šä¸å¯ä¿®æ”¹æŒ‡å‘çš„å†…å­˜å€¼
* `l = r`å¯¹è±¡å¤åˆ¶æ—¶`r`çš„é¡¶å±‚`const`å±æ€§è¢«å¿½ç•¥ï¼Œåº•å±‚`const`å±æ€§ä¸å¯å¿½ç•¥
### constexpr
* å¸¸é‡è¡¨è¾¾å¼ï¼š`const`ä¸”ç¼–è¯‘æœŸå€¼ç¡®å®š
* `constexpr int a = å¸¸é‡è¡¨è¾¾å¼`ï¼Œ`a`å¯ç”¨äºéœ€è¦å¸¸é‡è¡¨è¾¾å¼çš„åœ°æ–¹ï¼Œ`constexpr`å¯¼è‡´é¡¶å±‚`const`
* å¸¸é‡è¡¨è¾¾å¼å¯ä»¥æ˜¯ç®—æœ¯ç±»å‹ã€æŒ‡é’ˆæˆ–å¼•ç”¨ï¼Œä½†æŒ‡é’ˆ/å¼•ç”¨å¿…é¡»æŒ‡å‘/ç»‘å®šåˆ°å›ºå®šåœ°å€
ï¼ˆå¼•ç”¨å‚æ•°å®é™…ä¼ é€’å˜é‡åœ°å€ï¼‰
### åˆ«å
```c++
typedef int i_t, *p_t; // å®šä¹‰äº†intå’Œint*çš„åˆ«å
const p_t p; // int *const p;
const p_t *pp; // int *const *pp;
using integer = int;
```
### auto
* `auto [ä¿®é¥°ç¬¦1]å˜é‡1 = åˆå€¼1[, ...];`
* åˆå€¼åº”å…·æœ‰ç›¸åŒåŸºæœ¬ç±»å‹
* `auto`ä¸€èˆ¬å¿½ç•¥åˆå€¼çš„å¼•ç”¨ç±»å‹å’Œé¡¶å±‚`const`å±æ€§
* `auto &`ä¿ç•™åˆå€¼çš„é¡¶å±‚`const`å±æ€§
* `const auto`å£°æ˜é¡¶å±‚`const`
```c++
const int ci = 0;
auto &r1 = ci; // const int &r1 = ci;
// auto &r2 = 0; // é”™è¯¯ï¼š0æ¨æ–­ä¸ºintï¼Œä½†int&ä¸å¯ç»‘å®šå¸¸é‡ï¼Œéœ€è¦const auto &r2 = 0;
```
### decltype
* `decltype(è¡¨è¾¾å¼) [ä¿®é¥°ç¬¦1]å˜é‡1[ = åˆå€¼1][, ...];`æ¨æ–­ç±»å‹ä½†ä¸æ±‚å€¼
* `decltype(å˜é‡)`ä¿ç•™å˜é‡çš„å¼•ç”¨ç±»å‹å’Œé¡¶å±‚`const`ï¼Œè¿™æ˜¯ä½¿ç”¨å¼•ç”¨ä¸ä½œä¸ºå˜é‡åˆ«åçš„å”¯ä¸€åœºæ™¯
* `decltype(éå˜é‡çš„è¡¨è¾¾å¼)`è‹¥ä¸ºå·¦å€¼åˆ™ä¸ºå¼•ç”¨ç±»å‹
```c++
const int a = 0, &r = a, *p = &a;
decltype(a) b = 0; // const int b = 0;
decltype(r) c = a; // const int &c = a;
decltype((a)) d = a; // const int &d = a;
decltype(*p) e = a; // const int &e = a;
```
* `=`èµ‹å€¼è¡¨è¾¾å¼è¿”å›å·¦å€¼
### struct
* ç±»å†…åˆå§‹åŒ–å¯ä»¥ä½¿ç”¨`=`æˆ–`{}`ï¼Œä¸å¯ä½¿ç”¨`()`
## 3
### using
* `using std::cin;`
* å¤´æ–‡ä»¶ä¸åº”åŒ…å«`using`
### stringæ„é€ 
```c++
#include <string>
string s1; // ""
string s2(s1); // å¤åˆ¶s1
string s2 = s1; // ç­‰ä»·
string s3("a"); // å¤åˆ¶å­—ç¬¦ä¸²å¸¸é‡
string s3 = "a"; // ç­‰ä»·
string s4(3, 'a'); // "aaa"
string s4 = string(3, 'a'); // ç­‰ä»·
```
### stringæ“ä½œ
```c++
os << s
is >> s // éç©ºç™½å­—ç¬¦ä¸²
getline(is, s) // ä¸ä¿å­˜'\n'ï¼Œè¿”å›is
s.empty()
string::size_type s.size() // å­—èŠ‚æ•°
s[n] // n >= 0 && n < s.size()ï¼Œå¦åˆ™ç»“æœæœªå®šä¹‰
s1 + s2
s1 = s2 // æ·±æ‹·è´
s1 == s2
!=, <, <=, >, >=
```
* ä½¿ç”¨`cname`ç‰ˆæœ¬çš„Cåº“ï¼ˆå‡½æ•°ä½äº`std`ï¼‰ï¼Œè€Œä¸æ˜¯`name.h`
```c++
for (auto c : s) // å¤åˆ¶
for (auto &c : s) // å¯ä¿®æ”¹
for (decltype(s.size()) i = 0; i != s.size(); ++i)
```
### vectoræ„é€ 
```c++
#include <vector>
vector<vector<string>> vv;
vector<int> v1; // ç©ºå‘é‡
vector<int> v2(v1);
vector<int> v2 = v1; // ç­‰ä»·
vector<int> v3 = {3, 1};
vector<int> v3{3, 1}; // ç­‰ä»·
vector<int> v4(3, 1); // {1, 1, 1}ï¼›æ„é€ åˆå§‹åŒ–
vector<int> v5(2); // {0, 0}ï¼›å†…ç½®ç±»å‹åˆå§‹åŒ–ä¸º0ï¼Œå®ä¾‹é»˜è®¤åˆå§‹åŒ–
vector<int> v6{2}; // {2}ï¼›å°è¯•è§£é‡Šä¸ºåˆ—è¡¨åˆå§‹åŒ–
vector<string> v7{2, "1"}; // {"1", "1"}ï¼›æ— æ³•è§£é‡Šä¸ºåˆ—è¡¨åˆå§‹åŒ–ï¼Œå°è¯•è§£é‡Šä¸ºæ„é€ åˆå§‹åŒ–
vector<string> v7 = {2, "1"}; // ç­‰ä»·
```
### vectoræ“ä½œ
```c++
v1.push_back(1);
v.empty()
vector<int>::size_type v1.size()
v[n]
v1 = v2 // æ·±æ‹·è´
v = {1, 2} // ç”¨å…ƒç´ çš„å‰¯æœ¬é‡å»ºå‘é‡
v1 == v2 // é•¿åº¦ç›¸åŒï¼Œå¯¹åº”å…ƒç´ ç›¸ç­‰ï¼ˆéœ€è¦å…ƒç´ ç±»å‹æ”¯æŒæ¯”è¾ƒï¼Œä¸‹åŒï¼‰
v1 != v2
<, <=, >, >= // å­—å…¸åº
```
* ä¸ºäº†æ•ˆç‡ä¸åº”æŒ‡å®šå‘é‡åˆå§‹å¤§å°ï¼Œé™¤éæ‰€æœ‰å…ƒç´ å€¼ç›¸åŒ
* å¯¹å‘é‡èŒƒå›´foræ—¶ä¸å¯å¢åˆ å…ƒç´ 
### è¿­ä»£å™¨
* åˆæ³•è¿­ä»£å™¨æŒ‡å‘å…ƒç´ æˆ–å…¶åçš„ä½ç½®
* ä½¿ç”¨è¿­ä»£å™¨æ—¶ä¸å¯å¢åˆ å…ƒç´ 
```c++
auto b = v.begin(), e = v.end(); // b == eç­‰ä»·äºvç©º
*iter
iter->æˆå‘˜
++iter
--iter
iter1 == iter2
iter1 != iter2
```
### è¿­ä»£å™¨ç±»å‹
```c++
vector<int>::iterator it1;
vector<int>::const_iterator it2; // åªè¯»
vector<int> v;
const vector<int> cv;
auto it3 = v.cbegin(), it4 = cv.begin(); // vector<int>::const_iterator
```
### vectorå’Œstringçš„è¿­ä»£å™¨ç®—æœ¯
```c++
iter + n
iter - n
iter += n
iter -= n
?::difference_type iter1 - iter2 // æœ‰ç¬¦å·
<, <=, >, >=
```
### äºŒåˆ†æœç´¢
```c++
auto beg = v.begin(), end = v.end();
auto mid = beg + (end - beg) / 2;
while (mid != end && *mid != value) {
    if (*mid < value)
        beg = mid + 1;
    else
        end = mid;
    mid = beg + (end - beg) / 2;
}
```
### æ•°ç»„
* ä¸å¯ç”¨`auto`å£°æ˜
* é•¿åº¦å¿…é¡»ä¸ºæ­£çš„å¸¸é‡è¡¨è¾¾å¼
* å†…ç½®ç±»å‹å±€éƒ¨æ•°ç»„å…ƒç´ åˆå€¼æœªå®šä¹‰ï¼Œç±»å±€éƒ¨æ•°ç»„å…ƒç´ é»˜è®¤åˆå§‹åŒ–
```c++
int a[3] = {}; // {0, 0, 0}
int (*pa)[3] = &a;
int (&ra)[3] = a;
auto b(a); // int *
decltype(a) c; // int[3]
int *beg = begin(a), *last = end(a);
ptrdiff_t diff = end - beg;
```
* `size_t`ã€`ptrdiff_t`ä½äº`cstddef`
* æ•°ç»„å¯ä»¥ä½¿ç”¨èŒƒå›´for
* å†…ç½®ç±»å‹`[]`å¯ä»¥æ¥å—è´Ÿä¸‹æ ‡ï¼Œåº“ç±»å‹`[]`åªæ¥å—éè´Ÿä¸‹æ ‡
### æ—§ä»£ç æ¥å£
```c++
string s;
char c_s[] = "hi";
s = c_s
s += c_s;
const char *p = s.c_str(); // å¯¹sçš„åç»­ä¿®æ”¹å¯èƒ½ä¼šä½¿pæ— æ•ˆ
strlen(p) == s.size(); // så†…éƒ¨æœ‰'\0'æ—¶ä¸ç­‰
```
* C++11ä¿è¯`string`è¿ç»­å­˜å‚¨ä¸”ä»¥'\0'ç»“å°¾
```c++
int a[] = {0, 1, 2, 3, 4};
vector<int> v(a + 1, a + 3); // {1, 2}
```
### é«˜ç»´æ•°ç»„
```c++
int a[3][2][1] = {{1}, {2}, {3}}; // {1, 0, 2, 0, 3, 0}
for (auto &row : a) // int (&row)[2][1]
for (auto row : a) // int (*row)[1]ï¼Œä¸‹ä¸€å±‚æ— æ³•èŒƒå›´for
```
## 4
### è¿ç®—ç¬¦
* å‰ç½®`++`ã€`--`è¿”å›å·¦å€¼ï¼Œåç½®è¿”å›å³å€¼ï¼ˆç±»å¯¹è±¡å¯èƒ½æœ‰æ€§èƒ½æŸå¤±ï¼‰
* `&&`ã€`||`ã€`?:`ã€`,`è§„å®šæ±‚å€¼é¡ºåº
* æ±‚å€¼é¡ºåºç‹¬ç«‹äºä¼˜å…ˆçº§ã€ç»“åˆå¾‹
* `m/n`å‘0å–æ•´ï¼Œ`m%n`å’Œ`m`åŒå·
```c++
int i;
i = {1};
// i = {3.14}; é”™è¯¯ï¼Œä¸¢å¤±ç²¾åº¦
i = {}; // i = 0;
string s = "s";
s = {}; // s = "";
```
* `?:`çš„ä¸¤ä¸ªç»“æœè¡¨è¾¾å¼éƒ½æ˜¯å·¦å€¼æ—¶è¿”å›å·¦å€¼
* æœ‰ç¬¦å·æ•°å³ç§»æ—¶ç¬¦å·ä½çš„å¤„ç†æœºå™¨ç›¸å…³ï¼Œå·¦ç§»æ—¶æ”¹å˜ç¬¦å·ä½ç»“æœæœªå®šä¹‰
```c++
sizeof char == 1 // size_t
sizeof(int) == sizeof(int&)
int i, *p;
sizeof i
sizeof *p // ä¸æ±‚å€¼
sizeof ç±»::å­—æ®µ
char a[10];
sizeof(1, a) // 10ï¼š,è¡¨è¾¾å¼å¦‚æœå³ä¾§æ˜¯å·¦å€¼åˆ™ç»“æœä¸ºå·¦å€¼
```
### éšå¼ç±»å‹è½¬æ¢
* å°æ•´å‹å¦‚æœæ­£å€¼èŒƒå›´åŒ…å«äº`int`åˆ™è¿ç®—æ—¶æå‡ä¸º`int`ï¼Œå¦åˆ™ä¸º`unsigned`
* `wchar_t`ã€`char16_t`ã€`char32_t`æŒ‰æ­£å€¼èŒƒå›´æå‡åˆ°`int`ã€`unsigned`ã€`long`ã€`unsigned long`ã€`long long`ã€`unsigned long long`ä¸­æœ€å°çš„
* å°unsignedå’Œå¤§signedç›¸é‡ï¼Œè‹¥unsignedèŒƒå›´åŒ…å«äºsignedï¼ˆLinux amd64çš„unsignedå’Œlong longï¼‰åˆ™è½¬æ¢ä¸ºå¤§signedï¼Œå¦åˆ™ï¼ˆLinux amd64çš„unsigned longå’Œlong longï¼‰éƒ½è½¬æ¢ä¸ºå¤§unsigned
### æ˜¾å¼ç±»å‹è½¬æ¢
* `è½¬æ¢å<ç±»å‹>(è¡¨è¾¾å¼)`ï¼Œç±»å‹ä¸ºå¼•ç”¨æ—¶ç»“æœä¸ºå·¦å€¼
* `static_cast`è½¬æ¢æ•°å€¼ç±»å‹ï¼Œæˆ–æŠŠ`void *`è½¬æˆå…·ä½“ç±»å‹ï¼ˆå¿…é¡»å®é™…ä¸ºè¯¥ç±»å‹ï¼Œå¦åˆ™ç»“æœæœªå®šä¹‰ï¼‰
* `const_cast`ä»…å¯ç”¨äºæ¶ˆé™¤åº•å±‚`const`ï¼Œä½†è‹¥å¯¹è±¡æœ¬èº«ä¸º`const`ï¼Œå¯¹å…¶å†™å…¥ç»“æœæœªå®šä¹‰ï¼›å…¶ä»–castä¸å¯æ¶ˆé™¤åº•å±‚`const`
* `reinterpret_cast`ä¿ç•™åº•å±‚bitï¼Œè½¬æ¢è§£é‡Šæ–¹å¼
* `const_cast`ä¸»è¦ç”¨äºé‡è½½å‡½æ•°ï¼Œæ…ç”¨`reinterpret_cast`
* æ—§å¼ç±»å‹è½¬æ¢å°è¯•`const_cast`æˆ–`static_cast`ï¼Œè‹¥éƒ½ä¸åˆæ³•åˆ™é‡‡ç”¨`reinterpret_cast`
```c++
int i;
char *p = (char *)&i; // reinterpret_cast<char*>
```
