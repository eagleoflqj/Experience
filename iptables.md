# 概念
## 介绍
* iptables包含若干张表，每张表包含若干条内置链和自定义链
* 每条链由若干规则组成，每条规则指定对匹配的数据包执行的动作（称为目标）
## 目标
* 当前规则不匹配时，检查链的下一条规则
* 当前规则匹配时，根据目标决定动作
* 目标可能是一条自定义链，或iptables-extensions定义的目标，或特殊值ACCEPT（放行）、DROP（丢弃）、RETURN
* RETURN表示回退到上一条链并检查下一条规则
* 到达内置链的结尾，或从内置链RETURN，则采用链政策指定的目标
## 表
* 有5张独立的表，表的存在取决于内核配置和加载的模块
* `-t 表`用于指定命令作用的表，默认为filter
### filter
* 包含内置链INPUT（入境）、FORWARD（转发，双向）、OUTPUT（出境）
### nat
* 当一个数据包建立新连接时查询nat表
### mangle
### raw
### security
# 命令
## 列出链的规则
```sh
iptables -L [链 [编号]]
```
## 输出链的具体规则
```sh
iptables -S [链 [编号]]
```
* 不给定编号时，先输出-P和-N
