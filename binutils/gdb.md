```
gdb [选项] 程序 [...]
gdb -p 进程号
```
选项|意义
-|-
--args|视程序后的参数为程序参数
# 命令
## 启停
### run [参数1 ...] 启动程序
### kill 结束被调试进程
### quit 退出gdb
## 控制
### break 位置 [if 条件] 设置断点
位置|
-|
行号|
函数|
*函数+偏移量|
*绝对地址|
* 对位置无关代码，先启动程序再引用绝对地址
### catch syscall 名称 断在系统调用
### condition 断点号 条件 对已有断点设定条件
### disable/enable/delete [断点号] 禁用/启用/删除断点
* 不指定断点号则针对全部
### watch 变量 在变量被修改时暂停
* 硬件控制
### step 执行下一行源码
* 可进入被调函数
### next 执行下一行源码
* 不进入被调函数
### stepi 执行下一条汇编
* 可进入被调函数
### nexti 执行下一条汇编
* 不进入被调函数
### continue 恢复正常执行
### finish 恢复正常执行，直到当前函数结束
### return 值 跳过当前函数剩余部分，直接返回值
## 设置
### call 函数(参数) 调用函数
### set *(指针)内存=值 设置内存值
### set variable 变量=值 设置变量值
### set $变量=值 设置gdb变量
## 显示
### print [目标] 输出
目标|意义
-|-
无|上次print的值
$编号|以前print的值
\[/格式\] 表达式|表达式值
首元素@长度|数组
{类型}地址|内存值

格式|意义
-|-
t|二进制
o|八进制
x|十六进制
d|整数
u|无符号整数
f|浮点数
c|字符
s|字符串
a|地址
* `$寄存器`表示寄存器值，如`$rip`、`$pc`
* 格式需要与表达式类型匹配
### display [目标] 每步自动展示
* 无参数则展示全部启用的目标
* 除print的格式外，还支持`i`表示指令
### undisplay [展示号] 删除展示目标
* 不指定展示号则针对所有展示目标，下同
### enable/disable display [展示号] 启用/禁用展示目标
### x /[个数][单位][格式] [地址表达式] 输出内存值
单位|意义
-|-
b|字节，默认
h|半字
w|字
g|双字
* 个数默认1
* 格式同display，无格式则保留上次格式
* 无地址则输出下一个内存位置的值
## 代码
### list 查看源码
### disassemble 反汇编当前函数
## 栈帧
### backtrace 输出当前线程的调用栈
### up/down [帧数] 进入外层/内层帧
* 用于输出其他作用域的变量
* 帧数默认1，超出则进入最外/内层
## info
### breakpoints 列出断点
### display 列出展示目标
# 循环
```
while 条件
命令
...
end
```
# 内置函数
## $_regex(字符串, Python正则字符串) 匹配为1
## $_streq(字符串1, 字符串2) 相等为1
# 调试子进程
```
set follow-fork-mode child
set detach-on-fork off
b main
```
