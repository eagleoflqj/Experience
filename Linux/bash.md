# Bourne-Again SHell
```sh
bash [多字节选项] [参数]
```
参数|意义
-|-
无|启动非登录bash
文件|在新bash中执行脚本
-c 命令字符串 [新bash可引用的$0 ... $n]|在新bash中执行命令
-l|启动登录bash
set支持的选项|同set命令

多字节选项|意义
-|-
--login|同-l
--noediting|禁用readline库
--noprofile|不执行各profile
--norc|不执行各rc
--rcfile 文件|代替`~/.bashrc`
--version|显示版本
* 关闭终端时，前台、后台、暂停进程收到SIGHUP信号结束
## 登录Shell
* `$0`（以及`ps -f`的CMD列）以`-`开头，或`login`、`ssh`、tty1~6
* `/etc/passwd`每行最后一项指定登录shell
### 登录执行
* `/etc/profile`
* 一般在`/etc/profile`加入对`/etc/bash.bashrc`（Ubuntu）或`/etc/bashrc`（Fedora），以及`/etc/profile.d`下脚本的执行
* 执行`~/.bash_profile`、`~/.bash_login`、`~/.profile`之中第一个存在的
* 一般会上述文件加入对`~/.bashrc`的执行
### 退出执行
* 发行版特定（见`man bash`的`FILES`节），`/etc/bash.bash_logout`
* `~/.bash_logout`
## 非登录shell
* Shell中启动Shell（无`-l`）、GUI启动终端
### 执行顺序
* 发行版特定，`/etc/bash.bashrc`（Ubuntu）
* `~/.bashrc`
# 内置命令
## alias 命令别名
```sh
alias [别名=命令]
```
* 无参数则输出所有别名
## bg 后台运行作业
```sh
bg [%作业号1 [... %作业号n]]
```
## cd 切换工作目录
```sh
cd - # 切换到上一个目录
```
## declare 声明变量类型
```sh
declare [选项 [变量[=值]]]
```
选项|意义
-|-
无|等同于`set`
-a|数组
-A|字典
-f|函数
-F|输出所有函数名
-i|整数
-l|小写字母
-p|查看变量
-r|只读
-u|大写字母
-x|环境变量
+i或lux|取消对应属性
* 无变量则输出给定类型的变量
* 若声明时不赋值，则不改变已有的值
* `-i`后赋值，`=`右侧将自动解释为整数，参与运算的变量可以不带`$`
* `-l`、`-u`后赋值，自动转换大小写
* 若赋值类型不匹配，则结果不确定
## dirs 输出当前目录和目录栈
```sh
dirs [选项]
```
选项|意义
-|-
-c|清空目录栈
-l|家目录显示绝对路径
-p|分行输出
-v|分行并输出编号
+数字|第n项，从0开始
-数字|从后往前第n项，从0开始
* 目录栈从栈顶到栈底
## disown 忽略sighup
```sh
disown -h [%作业号或进程号]
```
* 关闭终端或exit当前shell时，后台R、S进程被接管，其他进程结束
## echo 输出并换行
```sh
echo [选项] 内容
echo "abc${变量}def"
```
选项|意义
-|-
-e|将无-e时的输出进行转义
-n|不自动换行
## eval 解释执行
```sh
eval [参数1 ...]
```
* 将参数组合成一个字符串，作为shell的输入执行
* 无命令则返回0，否则返回命令返回值
## exec 替换当前shell
```sh
exec [选项] 命令 [参数1 ...]
```
选项|意义
-|-
-a 参数0|传递给命令的参数0，否则为命令
-c|在空环境执行命令
-l|替换为登录shell
## exit 退出当前shell
```sh
exit [返回值]
```
* T进程结束
* R、S进程（显然为后台进程）被接管，遇到IO时若终端已关闭（TTY为?）则结束，若未关闭则I阻塞，O输出到终端
## export 设置环境变量
```sh
export [变量[=值]]
```
* 无参数同`declare -x`
* 环境变量可供子进程访问，但子进程对其的修改、删除不影响父进程
* export后第二次可以直接赋值
* export时若变量未赋值，则仅在后续赋值后导出
## false 失败
* 命令返回值1
## fg 前台运行作业
```sh
fg [%作业号]
```
## getopts 解析选项
```sh
while getopts 选项描述串 变量; do
  case $变量 in
  选项字母)
    ;;
  选项字母（后接参数）)
    # $OPTARG为参数
    ;;
  ?)
    # 处理非法选项
  esac
done
shift $((OPTIND - 1))
```
* `getopts`遇到第一个非`-字母`参数返回非0值
* 选项描述串为`字母`或`字母:`的拼接，`字母:`表示该`-字母`选项后接一个参数
* `$OPTIND`初值为1，每次调用`getopts`后加上处理掉的参数个数（1或2），最后调用`shift`跳过所有处理过的选项
## history 历史命令
```sh
history [个数]
history -c
history 选项 [文件]
```
选项|意义
-|-
无|输出全部缓存/缓存的最后几条
-a|将缓存中新增的命令追加到文件/`$HISTFILE`
-c|清空当前缓存
-r|将文件/`$HISTFILE`追加到缓存
-w|将缓存写入文件/`$HISTFILE`
## jobs 查看全部作业
```sh
jobs [选项]
```
选项|意义
-|-
-l|显示进程号
* +：fg、bg、disown默认的作业
* -：下一个默认的作业
## kill 向进程发送信号
```sh
kill [选项] 进程号或%作业号
```
选项|意义
-|-
-l \[数字]|列出可用信号，或数字对应信号（无SIG前缀）
-s 信号|指定信号，默认SIGTERM
-9|强行结束进程，SIGKILL
* 被信号n结束的进程返回值为128+n
### 向进程组发送信号
```sh
kill [选项] -- -进程组号
```
## let 算术表达式赋值
```sh
let 赋值表达式1 [...]
```
* `=`右侧的变量可以不带`$`
## logout 登出当前账户
```sh
logout [返回值]
```
* 需要作用在登录shell，等同于exit
## popd 删除栈中目录
```sh
popd [选项]
```
选项|意义
-|-
无|弹出栈顶并切换，同`+0`
-n|弹出栈顶，同`+1`
+数字|删除`` `dirs +数字` ``
-数字|删除`` `dirs -数字` ``
## printf 格式化输出
```sh
printf 格式 [参数1 ...]
```
## pushd 修改目录栈顶
```sh
pushd 选项或新目录
```
选项|意义
-|-
无|压栈当前目录并切换
+数字|循环左移`` `dirs` ``，切换到`` `dirs +数字` ``
-数字|循环左移`` `dirs` ``，切换到`` `dirs -数字` ``
## pwd 输出当前目录
```sh
pwd [-P]
```
* `-P`：如果有链接，输出实际路径
## read 读取用户输入
```sh
read [选项] [变量1 ...]
```
* 没有变量名则`$REPLY`为用户整行输入
* 以`$IFS`的第一个字符为分隔符，若`$IFS`为空则第一个变量为整行，其余变量为空
* 变量数n>输入数m则后n-m个变量赋值为空
* 变量数n<输入数m则第n个变量为后m-(n-1)个输入

选项|意义
-|-
-a|将输入视为数组，赋值给变量1，对后续变量不赋值
-d 字符串|以字符串的第一个字符为结束标志
-e|支持readline库
-n 字符数|最多读取字符数，不等待回车
-p 字符串|输出提示信息
-r|不把输入的\当作转义
-s|不显示输入
-t 秒数|超时则视为读入空串，命令返回128+SIGALRM
-u 文件描述符|从打开的文件读取
### 按行读取文件
```sh
while read line
do
  echo "$line"
done <文件
```
## readonly 设置只读变量
```sh
readonly [变量[=值]]
```
## set 设置bash选项/查看bash变量
```sh
set [选项]
```
* 无选项则输出所有变量和函数
* 影响`$SHELLOPTS`

选项|意义
-|-
+h|关闭当前PATH下的命令位置hash缓存，每次顺序搜索PATH
-o emacs\|vi|Emacs或Vi快捷键，默认Emacs
-o errexit或-e|单独的命令（非`||`左侧、if条件）失败则退出
-o noexec或-n|不执行命令，只检查语法
-o noglob或-f|关闭glob扩展
-o nounset或-u|变量未定义时不返回空字符串，报错
-o pipefail|若管道中有命令失败，执行完管道最后一条命令后退出，需配合`-e`
-o verbose或-v|输出每一行待解释的命令
-o xtrace或-x|先输出命令再执行
## shift 删除前几个参数
```sh
shift [数量]
```
* 数量默认1
* 改变`$@`、`$*`、`$#`、`$1`等
* 若参数个数不足，命令返回1
## shopt 设置bash选项
```sh
shopt [[-s|-u|-q] 选项1 ...]
```
* -s开启，-u关闭，-q查询（所有选项开启时返回值0，否则返回值1）
* 无选项：同-q，并输出开关状态
* 影响`$BASHOPTS`

选项|意义
-|-
dotglob|匹配隐藏文件
extglob|量词
failglob|若文件名匹配不存在，命令报错
globstar|**匹配0或多层子目录
nocaseglob|大小写不敏感匹配
nullglob|若文件名匹配不存在，返回空字符串

extglob语法|意义
-|-
?(模式)|匹配0或1次
*(模式)|匹配0或多次
+(模式)|匹配至少1次
@(模式)|匹配1次
!(模式)|所有情况，除了恰好匹配1次模式
* 多个模式`|`分隔

## source 在当前shell执行脚本
```sh
source 脚本
```
* `source`可简写为`.`
## test 判断
```sh
test 表达式
```
* 可简写为`[ 表达式 ]`
### 文件判断
```sh
[ 选项 文件 ]
```
* 无文件则结果为真，变量应用`"`

选项|意义
-|-
-b|块设备
-c|字符设备
-d|目录
-e或（不推荐）-a|存在
-f|普通文件
-g|设置了SGID
-G|属于有效组
-h或-L|符号链接
-k|设置了粘滞位
-N|Modify>=Access
-O|属于有效用户
-p|命名管道
-r|当前用户可读
-s|大小非0
-S|套接字
-u|设置了SUID
-w|当前用户可写
-x|当前用户可执行
* `-t 数字`：是文件描述符，且定向到终端
* `文件1 -nt 文件2`：文件1的Modify更新，或文件1存在且文件2不存在
* `文件1 -ot 文件2`：文件1的Modify更旧，或文件1不存在且文件2存在
* `文件1 -ef 文件2`：指向同一个i节点
### 字符串判断
```
[ 选项 字符串 ]
```
* 无字符串则结果为真，变量应用`"`

选项|意义
-|-
无或-n|非空
-z|空
```sh
[ 字符串1 运算符 字符串2 ]
```
运算符|意义
-|-
=或==|相同
!=|不同
\>/<|字典序大于/小于
* `>`、`<`应用`\`转义或置于引号内，否则被解释为重定向
### 整数判断
```sh
[ 整数1 运算符 整数2 ]
```
运算符|意义
-|-
-eq|相等
-ne|不等
-le|小于等于
-lt|小于
-ge|大于等于
-gt|大于
### 逻辑判断
```sh
[ 表达式1 -a 表达式2 ] # 与
[ 表达式1 -o 表达式2 ] # 或
[ ! 表达式 ] # 非
```
* 优先级`!`>`-a`>`-o`
* `\( 表达式 \)`改变运算顺序
## trap 信号处理
```sh
trap [参数]
```
参数|意义
-|-
无|列出所有处理命令
-l|列出信号名和数字
```sh
trap ['命令'] 信号1 [...]
```
-p 信号1 \[...]|列出指定信号的处理命令
* 不指定命令则取消对应信号的处理命令
* 信号`EXIT`表示脚本退出时执行
## true 成功
* 命令返回值0
## type 判断命令类型
```sh
type [选项] 命令
```
选项|意义
-|-
-a|输出命令的所有定义，否则只输出优先使用的定义
-p|若`-t`为file，则输出路径
-t|只输出类型，alias、builtin、file、function、keyword
## ulimit shell资源限制
```sh
ulimit [选项 [数值或unlimited]]
```
选项|意义
-|-
-H|硬限制，默认软+硬
-S|软（警告）限制
-a|显示全部资源限定
-c|core文件块数
-d|数据段KB数
-e|nice优先级
-f|创建的文件块数
-i|阻塞信号数
-l|进程锁在内存KiB数
-m|（已失效）使用内存KiB数
-n|同时打开文件数
-p|管道512B数
-q|POSIX消息队列字节数
-r|实时nice优先级
-s|栈KB数
-t|CPU秒数
-u|用户进程数
-v|虚拟内存KiB数
-x|文件锁数
* 块默认1KiB，在POSIX模式下为512B
* 普通用户不能上调硬限制，只能结束当前bash
## umask 设置新文件默认权限
```sh
umask [参数]
```
参数|意义
-|-
无|查看当前掩码
-S|查看当前权限
0abc|设置新目录权限777去掉abc，新文件权限666去掉abc
## unalias 删除别名
```sh
unalias 别名1 [...]
unalias -a # 删除所有别名
```
## unset 删除变量
```sh
unset 变量1 [...]
```
* 不可删除只读变量
# 重定向
* 0标准输入
* 1标准输出 2标准错误 默认1  
* \>覆盖 \>\>追加
## 只显示错误
```sh
命令 >/dev/null
```
## 全不显示
```sh
命令 1>/dev/null 2>/dev/null 
命令 1>/dev/null 2>&1
```
# 数值
* 普通数字：十进制
* 先导0：八进制
* 先导0x：十六进制
* 基数#数值：2-64进制
* 基数<=36时，不区分大小写；基数>36时，先小写后大写，最后`@`和`_`
# Globbing
* 先解释，再执行；命令接受展开后的参数
* 若文件名匹配不存在，则不进行扩展
## \`命令\` 或 $(命令) 命令的标准输出
## ~ 家目录
## ~+ 当前目录
## ~用户 用户家目录
## !! 上一条命令
```sh
sudo !!
PYTHONIOENCODING=utf-8 !!
```
## !前缀 上一条匹配前缀的命令
## !编号 history显示的命令
## !-数字 history显示的倒数命令
## !?字符串 上一条包含字符串的命令
## $变量 或 ${变量} 变量值
* 变量不存在或为空时，作为参数`$变量`无效果，`"$变量"`为空串
### ${变量:-值} 存在且非空时返回变量值，否则返回值
### ${变量:=值} 存在且非空时返回变量值，否则返回值，并为变量赋值
### ${变量:+值} 存在且非空时返回值，否则返回空
### ${变量:?消息} 存在且非空时返回变量值，否则输出消息并报错
* 上述4项去掉`:`则条件变为“存在”
### $数字 命令的第n个参数
* `$0`为命令本身
* 参数超过9则用`${数字}`
### $! 上一个后台命令的PID
### $@ 当前函数实参
* 无引号：`$1 ... ${N}`
* 双引号（用于循环）：`"$1" ... "${N}"`
### $# 当前函数实参数
### $$ 当前shell的PID
### $* 当前函数实参
* 无引号：`$1 ... ${N}`
* 双引号：`"$1c...c${N}"`，`c`为`$IFS`的第一个字符
### $_ 上一条命令的最后一个参数
### $- 当前SHELLOPTS的简写
### $? 上一条命令的返回值
## $((整数运算)) 或（不推荐）$[整数运算] 运算结果
## ${变量#模式} / ${变量##模式} 头部非贪婪/贪婪匹配
* 若匹配成功，返回未匹配的部分，否则返回原字符串
* 模式可使用`*`、`?`、`[]`或`[^]`
## ${变量%模式} / ${变量%%模式} 尾部非贪婪/贪婪匹配
## ${变量^^} 转为大写
## ${变量:起点:长度} 或 ${变量:起点} 提取子串
* 省略长度则到结尾
* 负数起点表示从后往前；为避免和变量默认值语法混淆，`-`前需有空格
* 0为第一个字符，-1为最后一个字符
## ${变量,,} 转为小写
## ${变量/模式/替换} / ${变量//模式/替换} 一次/所有贪婪匹配替换
## ${变量/#模式/替换} / ${变量/%模式/替换} 头/尾部贪婪匹配替换
## ${!变量} 间接表达式
* 变量值为另一变量名时，返回另一变量值，否则报错
## ${!前缀*} 或 ${!前缀@} 变量名
## ${#变量} 字符串长度
## ^字符串1^字符串2 上一条包含字符串1的命令，把字符串1替换成字符串
## * 0或多个字符
* 不匹配隐藏文件
* 不匹配路径分隔符
## ** 0或多层子目录
* 需开启globstar
## {字符串1,...,字符串n} 每个字符串出现一次
* 字符串可为空
* 大括号可以嵌套
* 与其他模式组合时，优先展开大括号
## {起点..终点[..步长]} 区间内字符串出现一次
* 支持逆序
* 无法迭代则原样输出
* 起点包含前导0，则所有字符串被扩展为等长，长度由最长字符串决定
## [字符1...字符n] 集合中单字符
* `-`只能放在开头或结尾
## [起点1-终点1...] 连续集合中单字符
## [[:POSIX字符类:]] 类中单字符
## [!...] 或 [^...] 集合外单字符
## ? 单个非空字符
* 不匹配路径分隔符
# 符号
## && 前一条命令成功则执行后一条
## ((表达式)) 整数运算
* 命令返回值：结果非0返回0，结果为0返回1
* 表达式可含空格
* 支持`+`、`-`、`*`、`/`（整除）、`%`、`**`（指数）、前后缀的`++`和`--`
* 支持`<<`、`>>`（算术）、`&`、`|`、`^`、`~`
* 支持`<`、`<=`、`>`、`>=`、`==`、`!=`、`&&`、`||`、`!`、`?:`
* 支持`=`及其变体
* 支持`,`，从左到右计算，结果为最右表达式
* 内部不需要`$`，字符串被当作变量名并执行任意次间接访问，直到取得合法数值/非法数值（报错）/不存在或空（0）
## -- 分隔选项和参数
```sh
kill -9 -- -进程组号
```
## [[ 表达式 ]] 改进的判断
* 兼容`[]`，但对不存在或含空格的变量无需`"`
* `>`、`<`、`()`不需特殊处理
* 可用`&&`代替`-a`，`||`代替`-o`
* 字符串判断可用`*`代表0或多个字符
### 正则判断
```sh
[[ 字符串 =~ 正则表达式 ]]
```
## | 管道
```sh
命令1 | 命令2
```
* 将命令1的标准输出定向至命令2的标准输入
* 命令1失败不终止，命令返回值同命令2
## || 前一条命令失败则执行后一条
```sh
命令 || { echo fail; exit 1; }
```
* 和`&&`左结合，无优先级，因此`true || true && false`返回假
## \ 转义或忽略alias
* 无引号：2n、2n+1个\\输出为n个\\
* 单引号：n个\\输出为n个\\
* 双引号：2n-1、2n个\\输出为n个\\
* 行尾：多行命令
```sh
\命令
```
## ; 同行多命令
* 命令返回值同最后一条
## '' 保留引号内文本
* $'文本'：转义`\`
## "" 解释引号内文本
* 扩展`$`和`` ` ``
* 转义`\`的可打印字符
* 保留命令输出，例如``echo `cal` `` vs ``echo "`cal`"``
## << Here文档
```sh
命令 [参数1 ...] <<标识 [>输出]
内容
标识
```
本质为重定向，只能用于接受标准输入为参数的命令，等价于
```sh
echo 内容 | 命令 [参数1 ...] [>输出]
```
* 多行输入，直到遇到单独一行的标识
* `$`和`` ` ``被扩展，`\`被转义，`'`和`"`无语法效果
* 开始标识为`'标识'`时，不执行扩展和转义
## <<< Here字符串
```sh
命令 <<< 字符串
```
等价于
```sh
echo 字符串 | 命令
```
# Bash变量
## BASH bash程序位置
## BASHOPTS shopt设置的选项
## BASHPID bash进程的PID
## BASH_LINENO 函数调用行数组
* `${BASH_SOURCE[i+1]}`的第`${BASH_LINENO[i]}`行调用了`${FUNCNAME[i]}`
## BASH_SOURCE 脚本调用栈数组
* `${FUNCNAME[i]}`在`${BASH_SOURCE[i]}`定义，被`${BASH_SOURCE[i+1]}`中的`${FUNCNAME[i+1]}`调用
## BASH_VERSION bash版本
## BASH_VERSINFO bash版本数组
* 主版本、次版本、补丁级别、构建版本、发布状态、`$MACHTYPE`
## COLUMNS 终端列数
## FUNCNAME 函数调用栈数组
* `${FUNCNAME[0]}`为当前函数名
## IFS 词间分隔符
* 默认为`$' \t\n'`
## HISTFILE 历史命令存放文件
## HISTFILESIZE 保存历史命令数
## HISTSIZE 内存缓存历史命令数
## HISTTIMEFORMAT 命令时间戳
* `'%F %T '`，即`'%Y-%m-%d %H:%M:%S '`
## HOSTNAME 主机名
## HOSTTYPE CPU架构
## LINENO 脚本当前行号
## LINES 终端行数
## MACHTYPE 机器类型
## MAILCHECK 检查邮件的周期（秒）
## OSTYPE 操作系统类型
## PS1 命令提示符
转义字符|意义
-|-
\A|24小时制HH:MM
\h|主机名
\u|用户名
\w|当前目录
\W|当前目录名
\\\[\033\[颜色m\\]|其后文本颜色

前景颜色|意义
-|-
0|默认
1;32|浅绿
1;34|浅蓝
## PS2 多行命令时次要提示符
## PS3 select等待输入提示符
## PS4 xtrace下输出命令的提示符
## RANDOM 0到32767的随机数
## TMOUT 等待用户输入秒数
## UID 当前用户ID
# 环境变量
## DISPLAY GUI显示器
## HOME 用户家目录
## LANG 语言
* zh_CN.UTF-8
* 覆盖其他默认`LC_*`
## MAIL 用户邮箱
## OLDPWD 上一个工作目录
## PATH 可执行文件搜索路径
* 顺序搜索，`:`分隔
* 不要将`.`加入`PATH`，否则在其他用户可写的目录可能执行错误的程序
## PWD 工作目录
## SHELL 当前shell
## SHLVL 当前shell层数
## TERM 终端类型
## USER 当前用户名
# 本地化配置
## LC_TIME 日期时间
## LC_ALL 所有配置
* 若非空则覆盖其他默认/非默认`LC_*`
* C或POSIX表示7位ASCII
# 代理配置
* 在DNS之前决定是否使用代理
## http_proxy https_proxy HTTP[S]代理
* 值为`[协议]IP:端口`
## no_proxy 不使用代理的网站
* `,`分隔
* 包括高级域名
# 数组
## 创建
```sh
数组=(元素0 ...) # 元素可带通配符
数组=([下标]=元素 ...) ## 后续元素不指定下标则下标自动增长
数组[下标]=元素
新数组=("${数组[@]}") # 下标自动从0排列
```
## 追加
```sh
数组+=(元素 ...) # 从最大下标+1开始
```
## 读取元素
```sh
${数组[下标]} # 下标不存在则返回空
$数组 # = ${数组[0]}
```
## 删除元素
```sh
unset 数组[下标]
```
## 长度
```sh
${#数组[@]} # 返回实际赋值的元素个数
${#数组[*]}
```
## 子数组
```sh
# 全部
${数组[@]}
${数组[*]}
# 从下标开始
${数组[@]:下标}
${数组[*]:下标}
# 从下标开始的几个
${数组[@]:下标:个数}
${数组[*]:下标:个数}
```
* 有无`"`的差别同`$@`和`$*`
## 所有下标
```sh
${!数组[@]}
${!数组[*]}
```
# 字典
```sh
declare -A 字典 # 必须先声明
字典[键]=值 # 用法同数组
```
# 条件
## case
```sh
case 表达式 in
  模式) 命令;;
  ...
esac
```
* 模式可使用`*`、`?`、`|`、`[]`、`[^]`
* Bash 4.0后支持`;;&`穿越
## if
```sh
if 命令; then
  ...
[elif 命令; then
  ...]
[else
  ...]
fi
```
# 循环
* 支持`break`和`continue`
## while
```sh
while 命令; do
  ...
done
```
## until
```sh
until 命令; do
  ...
done
```
## for in
```sh
for 变量 in 列表; do
  ...
done
```
* 列表可由通配符产生
* `in 列表`省略则为`"$@"`
## for
```sh
for ((初值表达式; 判断表达式; 增量表达式)); do
  ...
done
```
* 表达式中变量可以不带`$`
## select
```sh
select 变量 in 空格分隔选项; do
  ...
done
```
* 输出一个数字对应选项的菜单，由用户输入数字选择
* 输入的内容存入`REPLY`，若是合法数字则对应的选项存入变量，否则变量为空
* 不自动终止，一般循环体使用`case`和`break`
# 函数
## 定义
```sh
函数() {
  ...
}
function 函数() {
  ...
}
```
* 变量默认全局作用域，`local`声明/定义函数作用域变量
## 调用
```sh
函数 [参数1 ...]
```
* 同名时alias优先于函数
* 正常结束返回0，`return 值`自定义命令返回值
# 快捷键
快捷键|意义
-|-
Alt+B|移动光标到左侧单词首字母
Alt+D|剪切光标右侧的单词
Alt+F|移动光标到右侧（含）单词尾字母后
Alt+L|光标至词尾转为小写
Alt+R|取消对来自history的命令的修改
Alt+U|光标至词尾转为大写
Alt+Backspace|剪切光标左侧的单词
Alt+Tab|从历史命令补全
Alt+.|插入上一条命令的最后一个词
Ctrl+A|移动光标到行首
Ctrl+B|左移光标
Ctrl+C|发送SIGINT
Ctrl+D|删除光标处字符，当前行无内容则发送EOF
Ctrl+E|移动光标到行尾
Ctrl+F|右移光标
Ctrl+K|剪切光标及右侧
Ctrl+L|清屏
Ctrl+M|回车
Ctrl+N|下一条命令
Ctrl+O|回车并显示下一条命令，便于重复历史
Ctrl+P|上一条命令
Ctrl+Q|解除标准输出阻塞
Ctrl+R|搜索历史命令
Ctrl+S|阻塞标准输出
Ctrl+T|光标位置字符与前一字符交换
Ctrl+U|剪切光标左侧
Ctrl+W|剪切光标左侧的单词
Ctrl+Y|粘贴
Ctrl+Z|暂停
Ctrl+\\|发送SIGQUIT
Ctrl+/|撤销
* Alt可用ESC代替，但ESC不能长按
