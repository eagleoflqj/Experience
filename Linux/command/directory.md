# 目录
## basename 路径尾
```sh
basename 路径
```
## chattr 设置Linux文件系统中的属性
```sh
chattr [-R] +|-|=属性串 文件1 [...]
```
属性|意义
-|-
s|删除后清零磁盘块
u|删除后保留内容
S|同步写入磁盘
i|不可修改、删除、移动或创建硬链接
a|只可追加
d|被dump程序忽略
A|读取文件时不更新访问时间，写入后A属性自动消失
c|写时压缩，读时解压
e|在逻辑块到物理块的映射中使用了extent，该属性可能无法修改
* ext文件系统中`c`、`s`、`u`尚未被当前（5.6.14）主线内核实现
* `a`、`i`不影响已打开的文件描述符
## cp 复制
```sh
cp [选项] 源 目的
cp [选项] 源1[... 源n] 目的目录
```
选项|意义
-|-
-a|等价于-dpr
-d|对符号链接，复制链接本身，否则最终指向
-f|强制，针对拥有目录写权限但无文件写权限的情况
-i|交互，文件已存在则询问是否覆盖
-l|硬链接
-p|在权限许可范围内保留属性
-r|递归复制
-s|符号链接，目的必须在当前目录下
-u|更新，仅当源较新或目的不存在时复制

源|目的|行为
-|-|-
文件/目录|目录|复制到目录下
文件/目录|目录下新位置|复制
文件|文件|覆盖
目录|文件|非法
## cpio 复制文件进/出归档
```sh
cpio -o [-B] [选项]
cpio -i [-du] [选项]
cpio -t [选项]
```
* `-o`从标准输入读取文件列表（对目录不递归），归档至标准输出
* `-i`从标准输入读取归档，在当前目录提取
* `-t`从标准输入读取归档，列出归档内文件；输出blocks单位512B

选项|意义
-|-
-B|以5120字节为单位，否则512字节
-c|同`-H newc`
-d|按需建立目录（适用于归档了`d/f`但未归档`d`，当前目录下无`d`）
-H 格式|指定格式，默认`-o`时`bin`，`-i`或`-t`时自动检测
-u|较旧文件覆盖较新同名文件，否则不提取该文件
-v|输出处理的文件名，遇`-t`则分行输出详细信息
## dirname 路径去尾
```sh
dirname 路径
```
## du 查看目录大小
```sh
du [选项] [目录]
```
选项|意义
-|-
无|同-k，除非设置了`$POSIXLY_CORRECT`（默认以512字节块为单位）
-a|同时列出文件，否则只有目录
[-d \|--max-depth=]层数|统计的子目录层数
-h|人类可读*iB单位
-k|以KiB为单位
-m|以MiB为单位
-s|同-d 0
-S|对目录显示其自身大小，而不包括子目录大小
## find 查找文件
```sh
find [选项] [起点1 ...] [表达式]
```
选项|意义
-|-
-L|检查符号链接最终指向的文件，否则链接本身

* 起点默认`.`

表达式是如下几类的组合
* 测试：基于文件性质返回true/false
* 动作：执行动作，基于成功与否返回true/false
* 全局选项：决定测试和动作的方式，返回true
* 位置选项：影响其后的表达式，返回true
* 运算符：连接各表达式

位置选项|意义
-|-
-daystart|从当天0点起算，否则从24小时前算

测试|意义
-|-
-amin\|cmin\|mmin 分钟数|上次Access/Change/Modify时间
-anewer\|cnewer\|newer 文件|在给定文件被修改后A/C/M过
-atime\|ctime\|mtime 天数|上次A/C/M的24小时数
-empty|空文件或空目录
-fstype 文件系统|指定文件所属文件系统
-gid 组号\|-group 组|指定所属组
-iname 文件|忽略大小写的`-name`
-inum inode号|指定inode号
-iregex 正则表达式|忽略大小写的`-regex`
-links 硬链接数|指定文件硬链接数
-lname 文件|直接指向的文件名，`-L`时直接指向的文件不存在时返回true
-name 文件|查找文件名，不含前导目录，不受`-L`影响
-newerXY 参照|X时间在参照的Y时间之后
-nogroup\|nouser|所属组/用户号没有组/用户名
-perm 权限|精确等于权限，3/4位八进制或`,`分隔`ugo=`
-perm -权限|包含所有权限
-perm /权限|包含某一权限
-readable\|writable\|executable|可读/写/执行
-regex 正则表达式|完整路径匹配正则表达式
-samefile 文件|和给定文件inode相同
-size 个数\[单位\]|指定大小，单位默认`b`
-type 类型|指定类型，`f`为普通文件，其余同`ls -l`
-used 天数|A比C晚的天数
-uid 用户号\|-user 用户|指定所属用户

* 时间+n、n、-n分别为大于n+1、介于n和n+1、小于n
* 大小+n、n、-n分别为大于、等于、小于
* X/Y可为a、B、c、m，Y为t表示参照直接当作时间解释

单位|意义
-|-
b|512字节块
c|字节
w|双字节
k|KiB
M|MiB
G|GiB

动作|意义
-|-
-delete|删除，隐含`-d`
-exec 命令 \\;|执行命令，以{}指代匹配的文件
-print|按行输出完整路径，默认行为
-print0|输出完整路径，`\0`分隔

全局选项|意义
-|-
-d|后根遍历，否则先根
-maxdepth\|-mindepth 层数|指定最深/最浅层数，否则不限/0
-mount|不进入其他文件系统
## ln 创建指向目标的链接
```sh
ln [选项] 目标 链接
```
选项|意义
-|-
-f|强制，覆盖已存在的文件
-i|交互，文件已存在则询问是否覆盖
-n|若链接已存在且指向目录，试其为普通文件，操作将覆盖或失败
-s|符号链接，默认硬链接

* 若链接为目录，则在该目录下创建与目标末端同名的链接
* 不可硬链接到目录或另一分区的文件
## locate 在数据库查找文件
```sh
locate [选项] 模式
```
选项|意义
-|-
-i|不区分大小写
-r|正则表达式，否则globbing
* globbing模式下如果无通配符，等价于`*模式*`
## ls 列出文件
```sh
ls [选项] [目录或文件]
```
选项|意义
-|-
-a|包括隐藏的文件
-A|同-a，但不包括`.`和`..`
-ct|按修改时间降序
-d|只列出目录本身，不列出其下文件
-F|文件名追加尾缀
-i|列出i节点号
-l|分行显示详细信息
-n|同-l，但用户和组使用UID和GID
-r|反序
-s|占用空间，以块为单位
-R|递归输出
-S|按文件大小降序
-X|按扩展名升序
-Z|列出安全上下文
--block-size=块大小|指定块大小
--color=always\|auto\|never|控制颜色
--full-time|显示完整时间
--time=atime\|ctime|时间显示为Access/Change，否则Modify

尾缀|意义
-|-
/|目录
*|可执行文件
@|符号链接
=|套接字
\||命名管道

类型|意义
-|-
-|普通文件
b|块设备
c|字符设备
d|目录
l|链接
p|命名管道
s|套接字
* 详情第二列为i节点硬链接数，即指向该i节点的目录项数
* 默认`-ls`显示的大小为字节，占用空间为1KiB块，total为总占用块数
* 块大小为数字和可选单位，K同KiB，KB为十进制
## lsattr 查看Linux文件系统中的属性
```sh
lsattr [选项] [文件]
```
选项|意义
-|-
-a|包括隐藏的文件
-d|只列出目录本身，不列出其下文件
-l|显示属性长名字，否则字母
-R|递归
* 文件默认.
## mkdir 创建目录
```sh
mkdir [选项] [目录]
```
选项|意义
-|-
-m 权限|指定权限
-p|自动创建不存在的父目录
-v|对每个创建的目录输出一条信息
* 新建目录硬链接数为2（父目录的目录项和该目录的`.`），其父目录硬链接数+1（该目录的`..`）
## mknod 创建特殊文件
```sh
mknod [选项] 文件 类型 [主设备号 次设备号]
```
选项|意义
-|-
-m 权限|设置权限
* 类型为`b`、`c`或`u`必须指定主次设备号
* 类型为`p`不指定主次设备号
* 主设备号决定驱动，驱动用次设备号区分设备
## mktemp 生成临时文件并输出文件名
```sh
mktemp [选项] [模板]
```
选项|意义
-|-
-d|创建目录，否则文件
-p 目录|相对于该目录解释模板
--tmpdir\[=目录]|同-p，目录默认`$TMPDIR`，未设置则`/tmp`
* 模板至少以`XXX`结尾，不指定则默认`tmp.XXXXXXXXXX`并导致`--tmpdir`
* 目录和文件的权限分别为700、600去掉umask
## mv 移动或重命名
```sh
mv [选项] 文件 新文件
mv [选项] 源1[... 源n] 目的目录
```
选项|意义
-|-
-f|强制
-i|交互
-u|更新
## readlink 输出链接指向
```sh
readlink [选项] 链接
```
选项|意义
-|-
-f|绝对路径，最终指向
## realpath 输出绝对路径
```sh
realpath 路径
```
## rm 删除
```sh
rm [选项] 文件或目录
```
选项|意义
-|-
-f|强制删除
-i|交互
-r|递归删除
## rmdir 删除空目录
```sh
rmdir [选项] 目录
```
选项|意义
-|-
-p|删除子目录后，依次试图删除路径中的父目录
-v|对每个试图删除的目录输出一条信息
## scp 远程复制
```sh
scp [选项] [前缀]源 [前缀]目的
```
选项|意义
-|-
-r|递归复制

前缀：用户名@ip地址:
## stat 文件或文件系统状态
```sh
stat [选项] 文件
```
选项|意义
-|-
-f|显示文件系统状态，默认文件状态

标题|意义
-|-
Size|字节数
Blocks|512字节块数
IO Block|文件系统块字节数
Device|文件系统所在分区的主次设备号（hex和decimal）
Links|硬链接数
Access|读取时间
Modify|内容修改时间
Change|元信息修改时间
Birth|创建时间
## tar 归档处理
```sh
tar 动作 [选项] -f 归档文件 [被归档文件 ...|待解包文件 ...]
```
动作|意义
-|-
-c|打包
-t|列出包内文件
-x|解包

选项|意义
-|-
-C 目录|解包到目录
-j|使用bzip2
-P|保留被归档文件路径，否则去掉`/`、父目录前缀
-v|输出细节
-z|使用gzip
--exclude=文件|不打包文件
--newer=日期或文件|Modify或Change不早于日期或文件的Modify，文件必须以`.`或`/`开头，下同
--newer-mtime=日期或文件|Modify不早于日期或文件的Modify
* 归档文件`-`为标准输入/输出
## tree 查看目录树
```sh
tree [参数] [目录]
```
参数|意义
-|-
-a|包括隐藏文件
-I 模式|排除项
## touch 修改文件时间
```sh
touch [选项] 文件
```
选项|意义
-|-
-a|只修改Acesss（和Change）
-c|不新建文件
-d 字符串|指定时间，字符串精确定义见info
-m|只修改Modify（和Change）
-t \[\[CC]YY]MMDDhhmm\[.ss]|指定时间
## whereis 命令相关文件
```sh
whereis [选项] 命令
```
选项|意义
-|-
-b|可执行文件
-m|手册
-s|源码
## which 命令程序位置
```sh
which [-a] 命令
```
* `-a`：列出`$PATH`中的所有命令，否则只显示第一个
